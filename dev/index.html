<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An R package for processing global biodiversity data • mapme.biodiversity</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An R package for processing global biodiversity data">
<meta name="description" content="Biodiversity areas, especially primary forest, serve a multitude of functions for local economy, regional functionality of the ecosystems as well as the global health of our planet. Recently, adverse changes in human land use practices and climatic responses to increased greenhouse gas emissions, put these biodiversity areas under a variety of different threats. The present package helps to analyse a number of biodiversity indicators based on freely available geographical datasets. It supports computational efficient routines that allow the analysis of potentially global biodiversity portfolios. The primary use case of the package is to support evidence based reporting of an organization's effort to protect biodiversity areas under threat and to identify regions were intervention is most duly needed.">
<meta property="og:description" content="Biodiversity areas, especially primary forest, serve a multitude of functions for local economy, regional functionality of the ecosystems as well as the global health of our planet. Recently, adverse changes in human land use practices and climatic responses to increased greenhouse gas emissions, put these biodiversity areas under a variety of different threats. The present package helps to analyse a number of biodiversity indicators based on freely available geographical datasets. It supports computational efficient routines that allow the analysis of potentially global biodiversity portfolios. The primary use case of the package is to support evidence based reporting of an organization's effort to protect biodiversity areas under threat and to identify regions were intervention is most duly needed.">
<meta property="og:image" content="https://mapme-initiative.github.io/mapme.biodiversity/logo.png">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mapme.biodiversity</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.8.0.9008</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/quickstart.html">Quickstart</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="articles/installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="articles/terminology.html">Terminology</a></li>
    <li><a class="dropdown-item" href="articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="articles/contributing.html">Contributing</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-how-to-s" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">How To's</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-how-to-s">
<li><a class="dropdown-item" href="articles/output-wide.html">Transform output to wide</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mapme-initiative/mapme.biodiversity/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<!-- badges: end -->
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="mapmebiodiversity-">mapme.biodiversity <a class="anchor" aria-label="anchor" href="#mapmebiodiversity-"></a>
</h1>
</div>
<div class="section level2">
<h2 id="about">About<a class="anchor" aria-label="anchor" href="#about"></a>
</h2>
<p>Biodiversity areas, especially primary forests, provide multiple ecosystem services for the local population and the planet as a whole. The rapid expansion of human land use into natural ecosystems and the impacts of the global climate crisis put natural ecosystems and the global biodiversity under threat.</p>
<p>The mapme.biodiversity package helps to analyse a number of biodiversity related indicators and biodiversity threats based on freely available geodata-sources such as the Global Forest Watch. It supports computational efficient routines and heavy parallel computing in cloud-infrastructures such as AWS or Microsoft Azure using in the statistical programming language R. The package allows for the analysis of global biodiversity portfolios with a thousand or millions of AOIs which is normally only possible on dedicated platforms such as the Google Earth Engine. It provides the possibility to e.g. analyse the World Database of Protected Areas (WDPA) for a number of relevant indicators. The primary use case of this package is to support scientific analysis and data science for individuals and organizations who seek to preserve the planet biodiversity. Its development is funded by the German Development Bank KfW.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package and its dependencies can be installed from CRAN via:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"mapme.biodiversity"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version, use the following command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"https://github.com/mapme-initiative/mapme.biodiversity"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="available-resources-and-indicators">Available resources and indicators<a class="anchor" aria-label="anchor" href="#available-resources-and-indicators"></a>
</h2>
<p>Below is a list of the resources currently supported by <code>mapme.biodiversity</code>.</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="52%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">description</th>
<th align="left">licence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">chelsa</td>
<td align="left">Climatologies at High resolution for the Earth Land Surface Areas (CHELSA)</td>
<td align="left">Unknown - Must cite!</td>
</tr>
<tr class="even">
<td align="left">chirps</td>
<td align="left">Climate Hazards Group InfraRed Precipitation with Station data (CHIRPS)</td>
<td align="left">CC - unknown</td>
</tr>
<tr class="odd">
<td align="left">esalandcover</td>
<td align="left">Copernicus Land Monitoring Service (CLMS) 100 meter land cover product</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="even">
<td align="left">fritz_et_al</td>
<td align="left">Drivers of deforestation in the tropics</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="odd">
<td align="left">gfw_emissions</td>
<td align="left">Global Forest Watch - CO2 Emssions caused by forest cover loss</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="even">
<td align="left">gfw_lossyear</td>
<td align="left">Global Forest Watch - Year of forest cover loss occurence</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="odd">
<td align="left">gfw_treecover</td>
<td align="left">Global Forest Watch - Percentage of canopy closure in 2000</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="even">
<td align="left">global_surface_water_change</td>
<td align="left">Global Surface Water - Change of water occurrence intensity</td>
<td align="left"><a href="https://www.copernicus.eu/en/access-data" class="external-link uri">https://www.copernicus.eu/en/access-data</a></td>
</tr>
<tr class="odd">
<td align="left">global_surface_water_occurrence</td>
<td align="left">Global Surface Water - Percentage of water occurrence</td>
<td align="left"><a href="https://www.copernicus.eu/en/access-data" class="external-link uri">https://www.copernicus.eu/en/access-data</a></td>
</tr>
<tr class="even">
<td align="left">global_surface_water_recurrence</td>
<td align="left">Global Surface Water - Percentage of water recurrence</td>
<td align="left"><a href="https://www.copernicus.eu/en/access-data" class="external-link uri">https://www.copernicus.eu/en/access-data</a></td>
</tr>
<tr class="odd">
<td align="left">global_surface_water_seasonality</td>
<td align="left">Global Surface Water - Seasonality of water occurrrence</td>
<td align="left"><a href="https://www.copernicus.eu/en/access-data" class="external-link uri">https://www.copernicus.eu/en/access-data</a></td>
</tr>
<tr class="even">
<td align="left">global_surface_water_transitions</td>
<td align="left">Global Surface Water - Transition classes</td>
<td align="left"><a href="https://www.copernicus.eu/en/access-data" class="external-link uri">https://www.copernicus.eu/en/access-data</a></td>
</tr>
<tr class="odd">
<td align="left">gmw</td>
<td align="left">Global Mangrove Watch - Vector data of mangrove extent</td>
<td align="left">CC BY 4.0</td>
</tr>
<tr class="even">
<td align="left">mcd64a1</td>
<td align="left">MODIS Burned Area Monthly Product (Aqua and Terra)</td>
<td align="left"><a href="https://lpdaac.usgs.gov/data/data-citation-and-policies/" class="external-link uri">https://lpdaac.usgs.gov/data/data-citation-and-policies/</a></td>
</tr>
<tr class="odd">
<td align="left">nasa_grace</td>
<td align="left">NASA Gravity Recovery And Climate Experiment (GRACE) - Measurments of Earth’s mass and water changes</td>
<td align="left"><a href="https://nasagrace.unl.edu/About.aspx" class="external-link uri">https://nasagrace.unl.edu/About.aspx</a></td>
</tr>
<tr class="even">
<td align="left">nasa_srtm</td>
<td align="left">NASA Shuttle Radar Topography Mission (SRTM) Digital Elevation Model (DEM)</td>
<td align="left"><a href="https://lpdaac.usgs.gov/data/data-citation-and-policies/" class="external-link uri">https://lpdaac.usgs.gov/data/data-citation-and-policies/</a></td>
</tr>
<tr class="odd">
<td align="left">nelson_et_al</td>
<td align="left">Global maps of traveltime to cities</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="even">
<td align="left">soilgrids</td>
<td align="left">ISRIC - Modelled global soil property layers</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="odd">
<td align="left">teow</td>
<td align="left">Terrestrial Ecosystems of the World (TEOW) from WWF-US</td>
<td align="left">unknown</td>
</tr>
<tr class="even">
<td align="left">ucdp_ged</td>
<td align="left">UCDP Georeferenced Event Dataset (UCDP GED)</td>
<td align="left">CC-BY 4.0</td>
</tr>
<tr class="odd">
<td align="left">worldclim_max_temperature</td>
<td align="left">WorldClim - Monthly maximum temperature 1960 - 2021</td>
<td align="left"><a href="https://www.worldclim.org/about.html" class="external-link uri">https://www.worldclim.org/about.html</a></td>
</tr>
<tr class="even">
<td align="left">worldclim_min_temperature</td>
<td align="left">WorldClim - Monthly minimum temperature 1960 - 2021</td>
<td align="left"><a href="https://www.worldclim.org/about.html" class="external-link uri">https://www.worldclim.org/about.html</a></td>
</tr>
<tr class="odd">
<td align="left">worldclim_precipitation</td>
<td align="left">WorldClim - Monthly precipitation 1960 - 2021</td>
<td align="left"><a href="https://www.worldclim.org/about.html" class="external-link uri">https://www.worldclim.org/about.html</a></td>
</tr>
<tr class="even">
<td align="left">worldpop</td>
<td align="left">WorldPop - Unconstrained Global Mosaics 2000 - 2020</td>
<td align="left">CC-BY 4.0</td>
</tr>
</tbody>
</table>
<p>Next, is a list of supported indicators.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">biome</td>
<td align="left">Areal statistics of biomes from TEOW</td>
</tr>
<tr class="even">
<td align="left">burned_area</td>
<td align="left">Monthly burned area detected by MODIS satellites</td>
</tr>
<tr class="odd">
<td align="left">deforestation_drivers</td>
<td align="left">Areal statistics of deforestation drivers</td>
</tr>
<tr class="even">
<td align="left">drought_indicator</td>
<td align="left">Relative wetness statistics based on NASA GRACE</td>
</tr>
<tr class="odd">
<td align="left">ecoregion</td>
<td align="left">Areal statstics of ecoregions based on TEOW</td>
</tr>
<tr class="even">
<td align="left">elevation</td>
<td align="left">Statistics of elevation based on NASA SRTM</td>
</tr>
<tr class="odd">
<td align="left">exposed_population</td>
<td align="left">Number of people exposed to conflicts based on UCDP GED</td>
</tr>
<tr class="even">
<td align="left">fatalities</td>
<td align="left">Number of fatalities by group of conflict based on UCDP GED</td>
</tr>
<tr class="odd">
<td align="left">gsw_change</td>
<td align="left">Statistics of the surface water change layer by JRC</td>
</tr>
<tr class="even">
<td align="left">gsw_occurrence</td>
<td align="left">Areal statistic of surface water based on occurrence threshold</td>
</tr>
<tr class="odd">
<td align="left">gsw_recurrence</td>
<td align="left">Areal statistic of surface water based on reccurence threshold</td>
</tr>
<tr class="even">
<td align="left">gsw_seasonality</td>
<td align="left">Areal statistic of surface water by seasonality</td>
</tr>
<tr class="odd">
<td align="left">gsw_transitions</td>
<td align="left">Areal statistics of surface water grouped by transition class</td>
</tr>
<tr class="even">
<td align="left">landcover</td>
<td align="left">Areal statistics grouped by landcover class</td>
</tr>
<tr class="odd">
<td align="left">mangroves_area</td>
<td align="left">Area covered by mangroves</td>
</tr>
<tr class="even">
<td align="left">population_count</td>
<td align="left">Statistic of population counts</td>
</tr>
<tr class="odd">
<td align="left">precipitation_chirps</td>
<td align="left">Statistics of CHIRPS precipitation layer</td>
</tr>
<tr class="even">
<td align="left">precipitation_chirps</td>
<td align="left">Statistics of CHIRPS precipitation layer</td>
</tr>
<tr class="odd">
<td align="left">precipitation_wc</td>
<td align="left">Statistics of WorldClim precipitation layer</td>
</tr>
<tr class="even">
<td align="left">soilproperties</td>
<td align="left">Statistics of SoilGrids layers</td>
</tr>
<tr class="odd">
<td align="left">temperature_max_wc</td>
<td align="left">Statistics of WorldClim maximum temperature layer</td>
</tr>
<tr class="even">
<td align="left">temperature_min_wc</td>
<td align="left">Statistics of WorldClim minimum temperature layer</td>
</tr>
<tr class="odd">
<td align="left">traveltime</td>
<td align="left">Statistics of traveltime to the clostes city grouped by city category</td>
</tr>
<tr class="even">
<td align="left">treecover_area</td>
<td align="left">Area of forest cover by year</td>
</tr>
<tr class="odd">
<td align="left">treecover_area_and_emissions</td>
<td align="left">Area of forest cover and greenhouse gas emssions caused by forest loss by year</td>
</tr>
<tr class="even">
<td align="left">treecoverloss_emissions</td>
<td align="left">Greenouse gas emissions cause by forest loss by year</td>
</tr>
<tr class="odd">
<td align="left">tri</td>
<td align="left">Statistics of terrain rudgedness index based on NASA SRTM DEM</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="usage-example">Usage example<a class="anchor" aria-label="anchor" href="#usage-example"></a>
</h2>
<p><a href="https://mapme-initiative.github.io/mapme.biodiversity/index.html">mapme.biodiversity</a> works by constructing a portfolio from an sf object. Specific raster and vector resource matching the spatio-temporal extent of the portfolio are made available locally. Once all required resources are available, indicators can be calculated individually for each asset in the portfolio.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mapme-initiative.github.io/mapme.biodiversity/index.html">mapme.biodiversity</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="do">## Linking to GEOS 3.12.1, GDAL 3.9.0, PROJ 9.4.0; sf_use_s2() is TRUE</span></span></code></pre></div>
<p>Once you have decided on an indicator you are interested in, you can start by making the required resource available for your portfolio. Using <code><a href="reference/mapme.html">mapme_options()</a></code> you can set an output directory, control the maximum size of polygons before they are chunked into smaller parts, and control the verbosity of the package.</p>
<p>A portfolio is represented by an sf-object. It is required for the object to only contain geometries of type <code>POLYGON</code> and <code>MULTIPOLYGON</code> as assets. We can request the download of a resource for the spatial extent of our portfolio by using the <code><a href="reference/mapme.html">get_resources()</a></code> function. We simply supply our portfolio and one or more resource functions. Once the resources were made available, we can query the calculation of an indicator by using the <code><a href="reference/mapme.html">calc_indicators()</a></code> function. This function also expects the portfolio as input and one or more indicator functions. Once the indicator has been calculated for all assets in a portfolio, the data is returned as a nested list column to the original portfolio object. The output of each indicator is standardized to common format, consisting of a tibble with columns <code>datetime</code>, <code>variable</code>, <code>unit</code>, and <code>value</code>. We can transform the the data to long format by using <code><a href="reference/portfolio.html">portfolio_long()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/mapme.html">mapme_options</a></span><span class="op">(</span></span>
<span>  outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"res"</span>, package <span class="op">=</span> <span class="st">"mapme.biodiversity"</span><span class="op">)</span>,</span>
<span>  chunk_size <span class="op">=</span> <span class="fl">1e6</span>, <span class="co"># in ha</span></span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sierra_de_neiba_478140_2.gpkg"</span>, package <span class="op">=</span> <span class="st">"mapme.biodiversity"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/mapme.html">get_resources</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="reference/gfw_treecover.html">get_gfw_treecover</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"GFC-2023-v1.11"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="reference/gfw_lossyear.html">get_gfw_lossyear</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"GFC-2023-v1.11"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="reference/gfw_emissions.html">get_gfw_emissions</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/mapme.html">calc_indicators</a></span><span class="op">(</span><span class="fu"><a href="reference/treecover_area_and_emissions.html">calc_treecover_area_and_emissions</a></span><span class="op">(</span>years <span class="op">=</span> <span class="fl">2016</span><span class="op">:</span><span class="fl">2017</span>, min_size <span class="op">=</span> <span class="fl">1</span>, min_cover <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/portfolio.html">portfolio_long</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">aoi</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">## Simple feature collection with 4 features and 8 fields</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="do">## Geometry type: POLYGON</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="do">## Dimension:     XY</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="do">## Bounding box:  xmin: -71.80933 ymin: 18.57668 xmax: -71.33201 ymax: 18.69931</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="do">## Geodetic CRS:  WGS 84</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="do">## # A tibble: 4 × 9</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="do">##   WDPAID ISO3  assetid indicator        datetime            variable unit  value</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;            &lt;dttm&gt;              &lt;chr&gt;    &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="do">## 1 478140 DOM         1 treecover_area_… 2016-01-01 00:00:00 emissio… Mg    4296.</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="do">## 2 478140 DOM         1 treecover_area_… 2016-01-01 00:00:00 treecov… ha    2370.</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="do">## 3 478140 DOM         1 treecover_area_… 2017-01-01 00:00:00 emissio… Mg    4970.</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="do">## 4 478140 DOM         1 treecover_area_… 2017-01-01 00:00:00 treecov… ha    2358.</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="do">## # ℹ 1 more variable: geom &lt;POLYGON [°]&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-cloud-storages">Using cloud storages<a class="anchor" aria-label="anchor" href="#using-cloud-storages"></a>
</h2>
<p><a href="https://mapme-initiative.github.io/mapme.biodiversity/index.html">mapme.biodiversity</a> leverages GDAL’s capabilities for data I/O. For users of this package, that means that integrating a cloud storage is as easy as setting up a configuration file and changing the <code>outdir</code> argument in <code><a href="reference/mapme.html">mapme_options()</a></code>. While you could also decide to use environment variables, we recommend to set up a GDAL config file. You can find GDAL’s documentation on this topic <a href="https://gdal.org/user/configoptions.html#gdal-configuration-file" class="external-link">here</a>.</p>
<p>Suppose that we want to use an AWS S3 bucket that we control to write resource data to. Let’s assume this bucket is already set up and we wish to refer to it in our R code as <code>mapme-data</code>. The GDAL configuration file should look something like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">[credentials]</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="kw">[.mapme-data]</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="dt">path</span><span class="ot">=</span><span class="st">/vsis3/mapme-data</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="dt">AWS_SECRET_ACCESS_KEY</span><span class="ot">=</span><span class="st">&lt;your-access-key&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="dt">AWS_ACCESS_KEY_ID</span><span class="ot">=</span><span class="st">&lt;your-access-id&gt;</span></span></code></pre></div>
<p>The connection will be handled based on GDAL’s virtual file system. You can find documentation on specific options for your cloud provider <a href="https://gdal.org/user/virtual_file_systems.html#network-based-file-systems" class="external-link">here</a>.</p>
<p>Ideally, you would also set the following in the <code>.Renviron</code> file in your user’s home directory to ensure that GDAL is aware of this configuration when an R session is started:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="dt">GDAL_CONFIG_FILE </span><span class="ot">=</span><span class="st"> "&lt;path-to-your-config-file&gt;"</span></span></code></pre></div>
<p>Then, in your scripts set the <code>outdir</code> option to the value specified with the <code>path</code> variable in the configuration file:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/mapme.html">mapme_options</a></span><span class="op">(</span>outdir <span class="op">=</span> <span class="st">"/vsis3/mapme-data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-note-on-parallel-computing">A note on parallel computing<a class="anchor" aria-label="anchor" href="#a-note-on-parallel-computing"></a>
</h2>
<p><a href="https://mapme-initiative.github.io/mapme.biodiversity/index.html">mapme.biodiversity</a> follows the parallel computing paradigm of the <a href="https://cran.r-project.org/package=future" class="external-link"><code>{future}</code></a> package. That means that you as a user are in the control if and how you would like to set up parallel processing. Since <code>{mapme.biodiversity} v0.9</code>, we apply pre-chunking to all assets in the portfolio. That means that assets are split up into components of roughly the size of <code>chunk_size</code>. These components can than be iterated over in parallel to speed up processing. Indicator values will be aggregated automatically.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">cluster</span>, workers <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code></pre></div>
<p>As another example, with the code below one would apply parallel processing of 2 assets, with each having 4 workers available to process chunks, thus requiring a total of 8 available cores on the host machine. Be sure to not request more workers than available on your machine.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://progressr.futureverse.org" class="external-link">progressr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">cluster</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://progressr.futureverse.org/reference/with_progress.html" class="external-link">with_progress</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mapme.html">calc_indicators</a></span><span class="op">(</span></span>
<span>    <span class="va">aoi</span>,</span>
<span>    <span class="fu"><a href="reference/treecover_area_and_emissions.html">calc_treecover_area_and_emissions</a></span><span class="op">(</span></span>
<span>      min_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      min_cover <span class="op">=</span> <span class="fl">30</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">sequential</span><span class="op">)</span> <span class="co"># close child processes</span></span></code></pre></div>
<p>Head over to the <a href="https://mapme-initiative.github.io/mapme.biodiversity/index.html">online documentation</a> find more detailed information about the package.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=mapme.biodiversity" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mapme-initiative/mapme.biodiversity/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mapme-initiative/mapme.biodiversity/issues" class="external-link">Report a bug</a></li>
<li><a href="https://mapme-initiative.org/" class="external-link">Learn more about MAPME</a></li>
<li><a href="https://github.com/mapme-initiative/mapme.osg" class="external-link">Read the Open Source Guide</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mapme.biodiversity</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://dariusgoergen.com/" class="external-link">Darius A. Görgen</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li>Om Prakash Bhandari <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mapme-initiative/mapme.biodiversity/actions" class="external-link"><img src="https://github.com/mapme-initiative/mapme.biodiversity/actions/workflows/R-CMD-check.yaml/badge.svg?branch=main" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/github/mapme-initiative/mapme.biodiversity?branch=main" class="external-link"><img src="https://img.shields.io/codecov/c/github/mapme-initiative/mapme.biodiversity/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/web/checks/check_results_mapme.biodiversity.html" class="external-link"><img src="https://badges.cranchecks.info/worst/mapme.biodiversity.svg" alt="CRAN status"></a></li>
<li><a href="https://CRAN.R-project.org/package=mapme.biodiversity" class="external-link"><img src="https://www.r-pkg.org/badges/version/mapme.biodiversity" alt="CRAN version"></a></li>
<li><a href="https://choosealicense.com/licenses/gpl-3.0/" class="external-link"><img src="https://img.shields.io/badge/License-GPL%20(%3E=3)-brightgreen.svg?style=flat" alt="License"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://dariusgoergen.com/" class="external-link">Darius A. Görgen</a>, Om Prakash Bhandari.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
